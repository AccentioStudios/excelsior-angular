<div class="ex-tree">
  <ng-container *ngFor="let item of items">
    <ex-accordion [isCollapsed]="!item.expanded" (onClick)="toggleItemCollap(item)">
      <ex-accordion-item parent [withChevron]="true" [class]="{ hidden: !isMatchedWithSearch(item) }">
        <div class="ex-tree-parent">
          <ex-checkbox
            [checked]="getTreeItemStatus(item) === 'selected'"
            (checkedChange)="toggleSelectionFromParentToAllChildren(item)"
            [disabled]="item.disabled"
            class="ex-mr-xs2"
            [indeterminate]="getTreeItemStatus(item) === 'indeterminate'"
          />
          {{ item.label }}
        </div>
      </ex-accordion-item>
      <ex-accordion-item
        *ngFor="let child of item.children"
        [indentation]="true"
        [class]="{ hidden: !isMatchedWithSearch(item) }"
      >
        <div class="ex-tree__subtree">
          <ex-checkbox
            [checked]="getTreeItemStatus(child) === 'selected'"
            (checkedChange)="toggleSelectItem(child)"
            [disabled]="item.disabled"
            class="ex-tree__subtree-checkbox"
          />
          {{ child.label }}
        </div>
      </ex-accordion-item>
    </ex-accordion>
    <div class="line"></div>
  </ng-container>
</div>
